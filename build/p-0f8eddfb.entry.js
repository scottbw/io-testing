import{r as t,h as n,H as i,g as r}from"./p-1e894e7c.js";import{n as e}from"./p-e17cc109.js";import{s as u}from"./p-58667357.js";import{i as h,t as o,a as s,c as a,b as c}from"./p-9c3de80e.js";function f(t,n,i){t=+t,n=+n,i=(e=arguments.length)<2?(n=t,t=0,1):e<3?1:+i;for(var r=-1,e=0|Math.max(0,Math.ceil((n-t)/i)),u=new Array(e);++r<e;)u[r]=t+r*i;return u}const l=Symbol("implicit");function M(){var t=new Map,n=[],i=[],r=l;function e(e){var u=e+"",h=t.get(u);if(!h){if(r!==l)return r;t.set(u,h=n.push(e))}return i[(h-1)%i.length]}return e.domain=function(i){if(!arguments.length)return n.slice();n=[],t=new Map;for(const r of i){const i=r+"";t.has(i)||t.set(i,n.push(r))}return e},e.range=function(t){return arguments.length?(i=Array.from(t),e):i.slice()},e.unknown=function(t){return arguments.length?(r=t,e):r},e.copy=function(){return M(n,i).unknown(r)},h.apply(e,arguments),e}function v(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}function p(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function d(t){return t<0?-t*t:t*t}function m(t){var n=t(c,c),i=1;function r(){return 1===i?t(c,c):.5===i?t(p,d):t(v(i),v(1/i))}return n.exponent=function(t){return arguments.length?(i=+t,r()):i},s(n)}function y(){var t=m(o());return t.copy=function(){return a(t,y()).exponent(t.exponent())},h.apply(t,arguments),t}const g=Math.PI,w=2*g,A=w-1e-6;function b(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function C(){return new b}function D(t){return function(){return t}}b.prototype=C.prototype={constructor:b,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,i,r){this._+="Q"+ +t+","+ +n+","+(this._x1=+i)+","+(this._y1=+r)},bezierCurveTo:function(t,n,i,r,e,u){this._+="C"+ +t+","+ +n+","+ +i+","+ +r+","+(this._x1=+e)+","+(this._y1=+u)},arcTo:function(t,n,i,r,e){var u=this._x1,h=this._y1,o=(i=+i)-(t=+t),s=(r=+r)-(n=+n),a=u-t,c=h-n,f=a*a+c*c;if((e=+e)<0)throw new Error("negative radius: "+e);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(f>1e-6)if(Math.abs(c*o-s*a)>1e-6&&e){var l=i-u,M=r-h,v=o*o+s*s,p=l*l+M*M,d=Math.sqrt(v),m=Math.sqrt(f),y=e*Math.tan((g-Math.acos((v+f-p)/(2*d*m)))/2),w=y/m,A=y/d;Math.abs(w-1)>1e-6&&(this._+="L"+(t+w*a)+","+(n+w*c)),this._+="A"+e+","+e+",0,0,"+ +(c*l>a*M)+","+(this._x1=t+A*o)+","+(this._y1=n+A*s)}else this._+="L"+(this._x1=t)+","+(this._y1=n)},arc:function(t,n,i,r,e,u){t=+t,n=+n,u=!!u;var h=(i=+i)*Math.cos(r),o=i*Math.sin(r),s=t+h,a=n+o,c=1^u,f=u?r-e:e-r;if(i<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+s+","+a:(Math.abs(this._x1-s)>1e-6||Math.abs(this._y1-a)>1e-6)&&(this._+="L"+s+","+a),i&&(f<0&&(f=f%w+w),f>A?this._+="A"+i+","+i+",0,1,"+c+","+(t-h)+","+(n-o)+"A"+i+","+i+",0,1,"+c+","+(this._x1=s)+","+(this._y1=a):f>1e-6&&(this._+="A"+i+","+i+",0,"+ +(f>=g)+","+c+","+(this._x1=t+i*Math.cos(e))+","+(this._y1=n+i*Math.sin(e))))},rect:function(t,n,i,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +i+"v"+ +r+"h"+-i+"Z"},toString:function(){return this._}};var x=Math.abs,j=Math.atan2,E=Math.cos,F=Math.max,L=Math.min,B=Math.sin,S=Math.sqrt,T=Math.PI,k=T/2,z=2*T;function U(t){return t>1?0:t<-1?T:Math.acos(t)}function W(t){return t>=1?k:t<=-1?-k:Math.asin(t)}function H(t){return t.innerRadius}function I(t){return t.outerRadius}function O(t){return t.startAngle}function P(t){return t.endAngle}function R(t){return t&&t.padAngle}function Z(t,n,i,r,e,u,h,o){var s=i-t,a=r-n,c=h-e,f=o-u,l=f*s-c*a;if(!(l*l<1e-12))return[t+(l=(c*(n-u)-f*(t-e))/l)*s,n+l*a]}function _(t,n,i,r,e,u,h){var o=t-i,s=n-r,a=(h?u:-u)/S(o*o+s*s),c=a*s,f=-a*o,l=t+c,M=n+f,v=i+c,p=r+f,d=(l+v)/2,m=(M+p)/2,y=v-l,g=p-M,w=y*y+g*g,A=e-u,b=l*p-v*M,C=(g<0?-1:1)*S(F(0,A*A*w-b*b)),D=(b*g-y*C)/w,x=(-b*y-g*C)/w,j=(b*g+y*C)/w,E=(-b*y+g*C)/w,L=D-d,B=x-m,T=j-d,k=E-m;return L*L+B*B>T*T+k*k&&(D=j,x=E),{cx:D,cy:x,x01:-c,y01:-f,x11:D*(e/A-1),y11:x*(e/A-1)}}const q=class{constructor(n){t(this,n),this.dataSrc="data/air.json",this.keys="Vision,Governance and Ethics,Digital Capacity,Adaptability,Size,Innovation Capacity,Human Capital,Infrastructure,Data Availability,Data Representativess",this.colours="#AF3845,#E94A5A,#ED6F7A,#F6B7BD,#F9F081,#F7E82D,#B8AE23,#334064,#4D6095,#6680C7",this.countryName="United States of America"}countrySelected(t){t.detail&&(this.countryName=t.detail)}load(){return fetch(this.dataSrc).then(t=>t.json()).then(t=>{this.data=t})}getCountry(t){let n=this.findByMatchingProperties(this.data,{Country:t});return n?n[0]:null}findByMatchingProperties(t,n){return t.filter((function(t){return Object.keys(n).every((function(i){return t[i]===n[i]}))}))}componentWillLoad(){return this.load()}componentWillRender(){this.country=this.filter()}componentWillUpdate(){}componentDidUpdate(){this.update()}componentDidLoad(){this.chartElement=this.element.shadowRoot.getElementById("chart"),this.svg=u(this.chartElement).append("svg").attr("class","svg-container").attr("viewBox","0 0 600 500"),this.update()}filter(){let t=this.getCountry(this.countryName);if(!t||null==t)return null;let n=this.keys.split(",").map(t=>t.trim()),i=Object.entries(t).map(([t,n])=>({key:t,value:n}));return i=i.filter((function(t){return n.includes(t.key)})),i}update(){if(this.country){this.svg&&this.svg.selectAll("g")&&this.svg.selectAll("g").remove();let t=this.colours.split(",").map(t=>t.trim()),n=M().range(t).domain(this.country.map((function(t){return t.key}))),i=0,r=140,u=function t(){var n,i,r=M().unknown(void 0),e=r.domain,u=r.range,o=0,s=1,a=!1,c=0,l=0,v=.5;function p(){var t=e().length,r=s<o,h=r?s:o,M=r?o:s;n=(M-h)/Math.max(1,t-c+2*l),a&&(n=Math.floor(n)),h+=(M-h-n*(t-c))*v,i=n*(1-c),a&&(h=Math.round(h),i=Math.round(i));var p=f(t).map((function(t){return h+n*t}));return u(r?p.reverse():p)}return delete r.unknown,r.domain=function(t){return arguments.length?(e(t),p()):e()},r.range=function(t){return arguments.length?([o,s]=t,o=+o,s=+s,p()):[o,s]},r.rangeRound=function(t){return[o,s]=t,o=+o,s=+s,a=!0,p()},r.bandwidth=function(){return i},r.step=function(){return n},r.round=function(t){return arguments.length?(a=!!t,p()):a},r.padding=function(t){return arguments.length?(c=Math.min(1,l=+t),p()):c},r.paddingInner=function(t){return arguments.length?(c=Math.min(1,t),p()):c},r.paddingOuter=function(t){return arguments.length?(l=+t,p()):l},r.align=function(t){return arguments.length?(v=Math.max(0,Math.min(1,t)),p()):v},r.copy=function(){return t(e(),[o,s]).round(a).paddingInner(c).paddingOuter(l).align(v)},h.apply(p(),arguments)}().range([0,2*Math.PI]).align(0).domain(this.country.map((function(t){return t.key}))),o=function(){return y.apply(null,arguments).exponent(.5)}().range([i,r]).domain([0,100]),s=this.svg.append("g");s.attr("transform","translate(300,250)").selectAll("path").data(this.country).enter().append("path").attr("fill",(function(t){return n(t.key)})).attr("d",function(){var t=H,n=I,i=D(0),r=null,e=O,u=P,h=R,o=null;function s(){var s,a,c=+t.apply(this,arguments),f=+n.apply(this,arguments),l=e.apply(this,arguments)-k,M=u.apply(this,arguments)-k,v=x(M-l),p=M>l;if(o||(o=s=C()),f<c&&(a=f,f=c,c=a),f>1e-12)if(v>z-1e-12)o.moveTo(f*E(l),f*B(l)),o.arc(0,0,f,l,M,!p),c>1e-12&&(o.moveTo(c*E(M),c*B(M)),o.arc(0,0,c,M,l,p));else{var d,m,y=l,g=M,w=l,A=M,b=v,D=v,F=h.apply(this,arguments)/2,H=F>1e-12&&(r?+r.apply(this,arguments):S(c*c+f*f)),I=L(x(f-c)/2,+i.apply(this,arguments)),O=I,P=I;if(H>1e-12){var R=W(H/c*B(F)),q=W(H/f*B(F));(b-=2*R)>1e-12?(w+=R*=p?1:-1,A-=R):(b=0,w=A=(l+M)/2),(D-=2*q)>1e-12?(y+=q*=p?1:-1,g-=q):(D=0,y=g=(l+M)/2)}var G=f*E(y),Q=f*B(y),V=c*E(A),J=c*B(A);if(I>1e-12){var K,N=f*E(g),X=f*B(g),Y=c*E(w),$=c*B(w);if(v<T&&(K=Z(G,Q,Y,$,N,X,V,J))){var tt=G-K[0],nt=Q-K[1],it=N-K[0],rt=X-K[1],et=1/B(U((tt*it+nt*rt)/(S(tt*tt+nt*nt)*S(it*it+rt*rt)))/2),ut=S(K[0]*K[0]+K[1]*K[1]);O=L(I,(c-ut)/(et-1)),P=L(I,(f-ut)/(et+1))}}D>1e-12?P>1e-12?(d=_(Y,$,G,Q,f,P,p),m=_(N,X,V,J,f,P,p),o.moveTo(d.cx+d.x01,d.cy+d.y01),P<I?o.arc(d.cx,d.cy,P,j(d.y01,d.x01),j(m.y01,m.x01),!p):(o.arc(d.cx,d.cy,P,j(d.y01,d.x01),j(d.y11,d.x11),!p),o.arc(0,0,f,j(d.cy+d.y11,d.cx+d.x11),j(m.cy+m.y11,m.cx+m.x11),!p),o.arc(m.cx,m.cy,P,j(m.y11,m.x11),j(m.y01,m.x01),!p))):(o.moveTo(G,Q),o.arc(0,0,f,y,g,!p)):o.moveTo(G,Q),c>1e-12&&b>1e-12?O>1e-12?(d=_(V,J,N,X,c,-O,p),m=_(G,Q,Y,$,c,-O,p),o.lineTo(d.cx+d.x01,d.cy+d.y01),O<I?o.arc(d.cx,d.cy,O,j(d.y01,d.x01),j(m.y01,m.x01),!p):(o.arc(d.cx,d.cy,O,j(d.y01,d.x01),j(d.y11,d.x11),!p),o.arc(0,0,c,j(d.cy+d.y11,d.cx+d.x11),j(m.cy+m.y11,m.cx+m.x11),p),o.arc(m.cx,m.cy,O,j(m.y11,m.x11),j(m.y01,m.x01),!p))):o.arc(0,0,c,A,w,p):o.lineTo(V,J)}else o.moveTo(0,0);if(o.closePath(),s)return o=null,s+""||null}return s.centroid=function(){var i=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+e.apply(this,arguments)+ +u.apply(this,arguments))/2-T/2;return[E(r)*i,B(r)*i]},s.innerRadius=function(n){return arguments.length?(t="function"==typeof n?n:D(+n),s):t},s.outerRadius=function(t){return arguments.length?(n="function"==typeof t?t:D(+t),s):n},s.cornerRadius=function(t){return arguments.length?(i="function"==typeof t?t:D(+t),s):i},s.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:D(+t),s):r},s.startAngle=function(t){return arguments.length?(e="function"==typeof t?t:D(+t),s):e},s.endAngle=function(t){return arguments.length?(u="function"==typeof t?t:D(+t),s):u},s.padAngle=function(t){return arguments.length?(h="function"==typeof t?t:D(+t),s):h},s.context=function(t){return arguments.length?(o=null==t?null:t,s):o},s}().innerRadius(i).outerRadius((function(t){return o(e(t.value,2))})).startAngle((function(t){return u(t.key)})).endAngle((function(t){return u(t.key)+u.bandwidth()})).padAngle(.001).padRadius(i)),s.selectAll("g").data(this.country).enter().append("g").attr("text-anchor",(function(t){return(u(t.key)+u.bandwidth()/2+Math.PI)%(2*Math.PI)<Math.PI?"end":"start"})).attr("transform",(function(t){return"rotate("+(180*(u(t.key)+u.bandwidth()/2)/Math.PI-90)+")translate("+(o(t.value)+10)+",0)"})).append("text").text((function(t){return t.key+" "+e(t.value,2)})).attr("transform",(function(t){return(u(t.key)+u.bandwidth()/2+Math.PI)%(2*Math.PI)<Math.PI?"rotate("+(180-(180*(u(t.key)+u.bandwidth()/2)/Math.PI-90)-180).toString()+")":"rotate("+(0-(180*(u(t.key)+u.bandwidth()/2)/Math.PI-90)-0).toString()+")"})).attr("class","label").attr("alignment-baseline","middle")}}render(){return this.country?n(i,null,n("div",{id:"chart"}),n("slot",null)):n(i,null)}get element(){return r(this)}};q.style=":host{display:block;align-items:center;width:100%}.label{font-size:0.8rem;font-weight:bold}path:hover{stroke-width:1px;stroke:white}.chart{width:100%}";export{q as oi_radial_barchart}